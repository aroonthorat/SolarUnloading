<!DOCTYPE html>
<html>

<head>
    <title>Debug Unloading Records</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }

        .record {
            background: #252526;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #667eea;
        }

        .field {
            margin: 5px 0;
        }

        .field-name {
            color: #9cdcfe;
            font-weight: bold;
        }

        .field-value {
            color: #ce9178;
        }

        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
        }

        button:hover {
            background: #5568d3;
        }

        h1 {
            color: #667eea;
        }

        .count {
            color: #4ec9b0;
            font-size: 18px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <h1>üîç Debug: Unloading Records</h1>
    <button onclick="loadRecords()">Load All Unloading Records</button>
    <div id="output"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';
        import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAfRYoZT9c4O0flc39iROdgC1bTQkUXq88",
            authDomain: "gen-lang-client-0579320558.firebaseapp.com",
            projectId: "gen-lang-client-0579320558",
            storageBucket: "gen-lang-client-0579320558.firebasestorage.app",
            messagingSenderId: "770401014858",
            appId: "1:770401014858:web:placeholder"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.loadRecords = async () => {
            const output = document.getElementById('output');
            output.innerHTML = '<div style="color: #4ec9b0;">Loading...</div>';

            try {
                const snapshot = await getDocs(collection(db, 'unloading_records'));

                output.innerHTML = `<div class="count">Total Records: ${snapshot.size}</div>`;

                snapshot.forEach((doc, index) => {
                    const data = doc.data();

                    const recordDiv = document.createElement('div');
                    recordDiv.className = 'record';

                    let html = `<h3 style="color: #dcdcaa;">Record #${index + 1}</h3>`;
                    html += `<div class="field"><span class="field-name">Document ID:</span> <span class="field-value">${doc.id}</span></div>`;

                    // Show all fields
                    Object.keys(data).sort().forEach(key => {
                        const value = data[key];
                        let displayValue = value;

                        if (typeof value === 'object') {
                            displayValue = JSON.stringify(value, null, 2);
                        }

                        html += `<div class="field"><span class="field-name">${key}:</span> <span class="field-value">${displayValue}</span></div>`;
                    });

                    recordDiv.innerHTML = html;
                    output.appendChild(recordDiv);
                });

                if (snapshot.empty) {
                    output.innerHTML = '<div style="color: #f48771;">‚ùå No records found!</div>';
                }

            } catch (error) {
                console.error('Error:', error);
                output.innerHTML = `<div style="color: #f48771;">Error: ${error.message}</div>`;
            }
        };
    </script>
</body>

</html>